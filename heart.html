<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chúc mừng sinh nhật</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    background: #000;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
    user-select: none;
  }
  #heart {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 160px;
    color: #ff2e63;
    animation: heartbeat 1.5s ease-in-out infinite;
    text-shadow: 0 0 15px #ff2e63;
    z-index: 10;
  }
  @keyframes heartbeat {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.2);
    }
  }
  #message {
    position: absolute;
    bottom: 20%;
    width: 100%;
    text-align: center;
    font-size: 2.5rem;
    font-weight: bold;
    color: #fff;
    perspective: 1000px;
    z-index: 15;
  }
  .letter {
    display: inline-block;
    opacity: 0;
    transform-style: preserve-3d;
    animation-fill-mode: forwards;
  }
  @keyframes jump {
    0% { opacity: 0; transform: rotateY(0deg) translateY(0); }
    50% { opacity: 1; transform: rotateY(180deg) translateY(-30px); }
    100% { opacity: 1; transform: rotateY(0deg) translateY(0); }
  }
  #fireworks {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
    z-index: 5;
  }
  audio {
    display: none;
  }
</style>
</head>
<body>

<div id="heart">❤️</div>
<div id="message"></div>
<canvas id="fireworks"></canvas>
<audio id="bg-music" src="https://cdn.pixabay.com/download/audio/2022/02/17/audio_960b932324.mp3?filename=happy-birthday-6152.mp3" autoplay loop></audio>

<script>
// Text animation - jump each letter sequentially every 6 seconds
const msgText = "Chúc em Phong sinh nhật vui vẻ!";
const messageEl = document.getElementById("message");

function createLetters() {
  messageEl.innerHTML = "";
  for (let i = 0; i < msgText.length; i++) {
    const span = document.createElement("span");
    span.textContent = msgText[i];
    span.className = "letter";
    span.style.animation = `jump 0.6s forwards`;
    span.style.animationDelay = (i * 0.2) + "s";
    messageEl.appendChild(span);
  }
}

function animateLoop() {
  createLetters();
  setTimeout(() => {
    messageEl.innerHTML = "";
  }, 5000);
}

animateLoop();
setInterval(animateLoop, 6000);

// Fireworks effect
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");
let cw, ch;
let fireworks = [];
let particles = [];
let lastTime = 0;

function random(min, max) {
  return Math.random() * (max - min) + min;
}

function resize() {
  cw = window.innerWidth;
  ch = window.innerHeight;
  canvas.width = cw;
  canvas.height = ch;
}

class Firework {
  constructor() {
    this.x = random(cw * 0.2, cw * 0.8);
    this.y = ch;
    this.targetY = random(ch * 0.2, ch * 0.5);
    this.speed = random(7, 10);
    this.particlesCreated = false;
    this.color = `hsl(${Math.floor(random(0, 360))}, 100%, 50%)`;
  }
  update() {
    this.y -= this.speed;
    if (this.y <= this.targetY && !this.particlesCreated) {
      this.createParticles();
      this.particlesCreated = true;
    }
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
  }
  createParticles() {
    for (let i = 0; i < 30; i++) {
      particles.push(new Particle(this.x, this.y, this.color));
    }
  }
  done() {
    return this.y <= this.targetY;
  }
}

class Particle {
  constructor(x, y, color) {
    this.x = x;
    this.y = y;
    this.color = color;
    this.radius = random(1, 3);
    this.speedX = random(-5, 5);
    this.speedY = random(-5, 5);
    this.alpha = 1;
    this.gravity = 0.1;
  }
  update() {
    this.speedY += this.gravity;
    this.x += this.speedX;
    this.y += this.speedY;
    this.alpha -= 0.02;
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(${this.colorRGB()},${this.alpha})`;
    ctx.fill();
  }
  colorRGB() {
    let h = parseInt(this.color.match(/hsl\((\d+),/)[1]);
    let s = 1, l = 0.5;
    let c = (1 - Math.abs(2 * l - 1)) * s;
    let x = c * (1 - Math.abs((h / 60) % 2 - 1));
    let m = l - c / 2;
    let r=0,g=0,b=0;
    if (h < 60) {r=c; g=x; b=0;}
    else if(h < 120){r=x; g=c; b=0;}
    else if(h <180){r=0; g=c; b=x;}
    else if(h <240){r=0; g=x; b=c;}
    else if(h <300){r=x; g=0; b=c;}
    else{r=c; g=0; b=x;}
    r = Math.floor((r + m) * 255);
    g = Math.floor((g + m) * 255);
    b = Math.floor((b + m) * 255);
    return `${r},${g},${b}`;
  }
  alive() {
    return this.alpha > 0;
  }
}

function loop(t=0) {
  ctx.clearRect(0, 0, cw, ch);

  if (Math.random() < 0.03) {
    fireworks.push(new Firework());
  }
  for (let i = fireworks.length -1; i >= 0; i--) {
    fireworks[i].update();
    fireworks[i].draw();
    if (fireworks[i].done()) {
      fireworks.splice(i, 1);
    }
  }
  for (let i = particles.length -1; i >= 0; i--) {
    particles[i].update();
    particles[i].draw();
    if (!particles[i].alive()) {
      particles.splice(i, 1);
    }
  }
  requestAnimationFrame(loop);
}

window.addEventListener('resize', resize);
resize();
loop();

</script>

</body>
</html>
